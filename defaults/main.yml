---

# .. envvar:: git_checkout__name
#
# Name of the checkout. Must be unique. Role run results are available as
# git_checkout__register_status[git_checkout__name]
git_checkout__name: 'sample_checkout'

# .. envvar:: git_checkout__src_path
# FIXME
# Path of the bare repository
git_checkout__src_path: '{{ ansible_local.root.src + "/" + git_checkout__name }}'

# .. envvar:: git_checkout__app_root_path
# FIXME
# Application installation directory
git_checkout__app_path: '{{ ansible_local.root.app + "/" + git_checkout__name }}'

# .. envvar:: git_checkout__app_home_path
# FIXME
# Application installation directory
git_checkout__app_home_path: '{{ ansible_local.root.app + "/" + git_checkout__name }}'

# Git service data
# This role supports GitHub and GitLab
git_checkout__git_service_host: 'github.com'
git_checkout__git_service_type: "{% if 'github' in git_checkout__git_service_host %}github{% else %}gitlab{% endif %}"
git_checkout__git_service_account: '{{ git_checkout__name }}'
git_checkout__git_service_repo: '{{ git_checkout__name }}'
git_checkout__git_service_sshkey: False

# .. envvar:: git_checkout__repo_url:
#
# Upstream repository URL
git_checkout__repo_url: '{% if git_checkout__deploy_key_enable|bool %}git@{{ git_checkout__git_service_host }}:{% else %}https://{{ git_checkout__git_service_host }}/{% endif %}{{ git_checkout__git_service_account }}/{{ git_checkout__git_service_repo }}.git'


# .. envvar:: git_checkout__user
#
# System user for checkout
git_checkout__user: '{{ git_checkout__name }}'


# .. envvar:: git_checkout__group
#
# System group for checkout
git_checkout__group: '{{ git_checkout__name }}'


# .. envvar:: git_checkout__version
#
# What version (branch, tag or commit id) to checkout
git_checkout__version: 'master'

git_checkout__deploy_key_enable: False

git_checkout__deploy_key_token: "{{ lookup('file', secret + '/git_checkout/' + git_checkout__repo_url | replace('/', '_') | replace('@', '_') | replace(':', '_') + '/token' ) }}"

